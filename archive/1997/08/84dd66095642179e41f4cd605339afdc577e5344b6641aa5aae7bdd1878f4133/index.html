<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title>
    <meta name="author" content="cryptoanarchy.wiki" />
    <meta name="description" content="84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133" />
    <meta name="keywords" content="84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name">

    

    
      <meta content="84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description">
    

    
      <meta content="http://localhost:4000/archive/1997/08/84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133/" property="og:url">
    

    
      <meta content="2018-06-20T21:43:48+02:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image">
    

    
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@_cryptoanarchy">
    <meta name="twitter:creator" content="@_cryptoanarchy">

    
      <meta name="twitter:title" content="84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133">
    

    
      <meta name="twitter:url" content="http://localhost:4000/archive/1997/08/84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133/">
    

    
      <meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a>
          <h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1>
          
            <div class="profile-about">
              Arise, you have nothing to lose but your barbed wire fences!
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a></li>
              
                <li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a></li>
              
                <li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a></li>
            <li><a href="/">Archive Home</a></li>
          </ul>
          <hr>
          <ul class="sidebar-nav">
            <strong>Similar Resources</strong>
            
              <li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a></li>
            
              <li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a></li>
            
              <li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <h1 id="1997-08-02---pgp-50b11-feedback--pgp-linux-memlock-patch">1997-08-02 - PGP 5.0b11 feedback / PGP Linux memlock patch</h1>

<h2 id="header-data">Header Data</h2>

<p>From: David Miller &lt;dm0@avana.net&gt;<br />
To: PGPlinuxbeta@pgp.com<br />
Message Hash: 84dd66095642179e41f4cd605339afdc577e5344b6641aa5aae7bdd1878f4133<br />
Message ID: &lt;33E3B246.2C983092@avana.net&gt;<br />
Reply To: <em>N/A</em><br />
UTC Datetime: 1997-08-02 22:28:41 UTC<br />
Raw Date: Sun, 3 Aug 1997 06:28:41 +0800<br /></p>

<h2 id="raw-message">Raw message</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: David Miller &lt;dm0@avana.net&gt;
Date: Sun, 3 Aug 1997 06:28:41 +0800
To: PGPlinuxbeta@pgp.com
Subject: PGP 5.0b11 feedback / PGP Linux memlock patch
Message-ID: &lt;33E3B246.2C983092@avana.net&gt;
MIME-Version: 1.0
Content-Type: text/plain

Guys,

Here's a patch for PGP 2.6.2 (and 2.6.3i) source which locks all
process pages in memory (will not swap to disk) under Linux if
the user is running with effective root privilege.  You might
consider putting something like this in PGP 5.0.  Also, this
patch should be generalizable to POSIX systems withthe mlockall(2)
function.  If you have any success in generalizing it to POSIX,
please let me know, as I only have access to Linux.

See 'man memlockall' for more info.

--David Miller

-- 
I'll take a smart dog over a dumb person any day.


Begin3
Title:		pgp-memlock.pat
Version:	25JUL97
Entered-date:	25JUL97
Description:	Patch for Linux PGP 2.6.2 and PGP 2.6.3i source to lock all
		pages in physical memory if running with root privilege.

		This keeps sensitive data from being swapped to disk, where
		it could be later recovered by undesirables.

		There is no effect if not run with effective root privilege.
		Root privs are immediately dismissed, allowing pgp to be
		safely installed SUID root (assuming its chmod'ed 4111).
		pgp.c is modified, increasing executable size by ~391 bytes.

Keywords:	PGP, encryption, security, Linux
Author: 	dm0@avana.net (David Miller)
Maintained-by:	dm0@avana.net (David Miller)
Primary-site:	sunsite.unc.edu  /pub/Linux/apps/crypto/pgp-memlock.pat
Alternate-site: Galactus
Original-site:	Coderpunks list
Platforms:	Linux
Copying-policy:	GPL
End


*** src/pgp.c	Sat Jul 26 01:25:57 1997
--- src/pgp.c.new	Sat Jul 26 01:25:50 1997
***************
*** 111,116 ****
--- 111,120 ----
  #include &lt;stdio.h&gt;
  #include &lt;stdlib.h&gt;
  #include &lt;string.h&gt;
+ #ifdef linux
+ #include &lt;unistd.h&gt;	/* for David Miller's memory lock patch */
+ #include &lt;sys/mman.h&gt;	/* for David Miller's memory lock patch */
+ #endif
  
  #ifdef __QNX__
  #include &lt;sys/stat.h&gt;
***************
*** 435,440 ****
--- 439,457 ----
  #ifdef	DEBUG1
      verbose = TRUE;
  #endif
+ 
+ /* David Miller's memory lock patch */
+ #ifdef linux					/* Linux only, for now */
+     if (geteuid() == 0) {			/* if we have root privs */
+         /* lock all current &amp; future pages in physical memory */
+ 	if (mlockall(MCL_CURRENT|MCL_FUTURE) &lt; 0)
+ 		fprintf(pgpout, LANG("\007Could not lock all pages in memory.\n"));
+ 	if (setuid(getuid()) &lt; 0)		/* drop root privs */
+ 		fprintf(pgpout, LANG("\007Could not drop root priviliges.\n"));
+     }
+ #endif
+ /* end David Miller's memory lock patch */
+ 
      /* The various places one can get passwords from.
       * We accumulate them all into two lists.  One is
       * to try on keys only, and is stored in no particular




</code></pre></div></div>

<h2 id="thread">Thread</h2>

<ul>
  <li>
    <p>Return to <a href="/archive/1997/08">August 1997</a></p>
  </li>
  <li>
    <p>1997-08-02 (Sun, 3 Aug 1997 06:28:41 +0800) - PGP 5.0b11 feedback / PGP Linux memlock patch - <em>David Miller &lt;dm0@avana.net&gt;</em></p>
  </li>
</ul>


        <footer>
          
            - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a>
          
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

