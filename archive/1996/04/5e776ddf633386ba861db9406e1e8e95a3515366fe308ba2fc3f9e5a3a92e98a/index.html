<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title>
    <meta name="author" content="cryptoanarchy.wiki" />
    <meta name="description" content="5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a" />
    <meta name="keywords" content="5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name">

    

    
      <meta content="5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description">
    

    
      <meta content="http://localhost:4000/archive/1996/04/5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a/" property="og:url">
    

    
      <meta content="2018-06-20T21:43:48+02:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image">
    

    
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@_cryptoanarchy">
    <meta name="twitter:creator" content="@_cryptoanarchy">

    
      <meta name="twitter:title" content="5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a">
    

    
      <meta name="twitter:url" content="http://localhost:4000/archive/1996/04/5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a/">
    

    
      <meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a>
          <h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1>
          
            <div class="profile-about">
              Arise, you have nothing to lose but your barbed wire fences!
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a></li>
              
                <li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a></li>
              
                <li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a></li>
            <li><a href="/">Archive Home</a></li>
          </ul>
          <hr>
          <ul class="sidebar-nav">
            <strong>Similar Resources</strong>
            
              <li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a></li>
            
              <li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a></li>
            
              <li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <h1 id="1996-04-19---re-why-compression-doesnt-perfectly-even-out-entropy">1996-04-19 - Re: why compression doesn’t perfectly even out entropy</h1>

<h2 id="header-data">Header Data</h2>

<p>From: Hal &lt;hfinney@shell.portal.com&gt;<br />
To: cypherpunks@toad.com<br />
Message Hash: 5e776ddf633386ba861db9406e1e8e95a3515366fe308ba2fc3f9e5a3a92e98a<br />
Message ID: &lt;199604182255.PAA13373@jobe.shell.portal.com&gt;<br />
Reply To: <em>N/A</em><br />
UTC Datetime: 1996-04-19 04:11:33 UTC<br />
Raw Date: Fri, 19 Apr 1996 12:11:33 +0800<br /></p>

<h2 id="raw-message">Raw message</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">From</span><span class="p">:</span> <span class="n">Hal</span> <span class="p">&lt;</span><span class="n">hfinney</span><span class="p">@</span><span class="n">shell</span><span class="p">.</span><span class="n">portal</span><span class="p">.</span><span class="n">com</span><span class="p">&gt;</span>
<span class="n">Date</span><span class="p">:</span> <span class="n">Fri</span><span class="p">,</span> <span class="m">19</span> <span class="n">Apr</span> <span class="m">1996</span> <span class="m">12</span><span class="p">:</span><span class="m">11</span><span class="p">:</span><span class="m">33</span> <span class="p">+</span><span class="m">0800</span>
<span class="k">To</span><span class="p">:</span> <span class="n">cypherpunks</span><span class="p">@</span><span class="n">toad</span><span class="p">.</span><span class="n">com</span>
<span class="n">Subject</span><span class="p">:</span> <span class="n">Re</span><span class="p">:</span> <span class="n">why</span> <span class="n">compression</span> <span class="n">doesn</span><span class="s1">'t perfectly even out entropy
Message-ID: &lt;199604182255.PAA13373@jobe.shell.portal.com&gt;
MIME-Version: 1.0
Content-Type: text/plain


From: daw@cs.berkeley.edu (David Wagner)
&gt; My entropy cruncher takes in random noise from a number of diverse
&gt; sources (some possibly of dubious quality).  I take *all* the noise
&gt; and run it through a hash function to distill entropy.
&gt; 
&gt; Now I need to have some method to estimate when I have enough entropy
&gt; in the random noise I'</span><span class="n">m</span> <span class="n">crunching</span><span class="p">.</span>  <span class="n">First</span> <span class="n">rule</span><span class="p">:</span> <span class="n">be</span> <span class="n">conservative</span><span class="p">.</span>
<span class="p">&gt;</span> <span class="n">One</span> <span class="n">can</span> <span class="n">never</span> <span class="n">have</span> <span class="n">too</span> <span class="n">much</span> <span class="n">entropy</span> <span class="k">in</span> <span class="n">the</span> <span class="n">input</span> <span class="k">to</span> <span class="n">the</span> <span class="n">hash</span> <span class="k">function</span><span class="p">.</span>
<span class="p">&gt;</span> 
<span class="p">&gt;</span> <span class="n">Therefore</span><span class="p">,</span> <span class="n">I</span> <span class="n">suggest</span> <span class="n">making</span> <span class="n">a</span> <span class="p">*</span><span class="n">copy</span><span class="p">*</span> <span class="k">of</span> <span class="n">the</span> <span class="n">input</span> <span class="n">noise</span> <span class="n">stream</span><span class="p">,</span>
<span class="p">&gt;</span> <span class="n">running</span> <span class="n">it</span> <span class="n">through</span> <span class="n">Jon</span> <span class="n">Wienke</span><span class="s1">'s "this shouldn'</span><span class="n">t</span> <span class="n">happen</span><span class="s2">" filter, and
&gt; feeding the result to some entropy estimator.  When the entropy
&gt; estimator says "</span><span class="n">I</span><span class="s1">'ve got 1000 bits of entropy", I stop crunching.
&gt; 
&gt; This is conservative design, folks.  Using Wienke'</span><span class="n">s</span> <span class="n">filter</span> <span class="k">in</span> <span class="n">this</span> <span class="n">manner</span>
<span class="p">&gt;</span> <span class="n">can</span><span class="s1">'t be any weaker than not using it at all. (agreed?)

I see two problems with this.

The first is whether this mysterious black box, the entropy estimator,
is really possible.  In practice the only way to know how much entropy
you'</span><span class="n">ve</span> <span class="n">gotten</span> <span class="n">is</span> <span class="k">to</span> <span class="n">have</span> <span class="n">a</span> <span class="k">model</span> <span class="n">for</span> <span class="n">how</span> <span class="n">the</span> <span class="n">data</span> <span class="n">is</span> <span class="n">being</span> <span class="n">generated</span><span class="p">,</span>
<span class="k">and</span> <span class="k">to</span> <span class="n">deduce</span> <span class="k">from</span> <span class="n">that</span> <span class="n">an</span> <span class="n">estimate</span> <span class="k">of</span> <span class="n">the</span> <span class="n">entropy</span> <span class="n">rate</span><span class="p">.</span>  <span class="n">So</span> <span class="n">the</span> <span class="n">entropy</span>
<span class="n">estimator</span> <span class="n">can</span><span class="s1">'t be a general-purpose calcluation, but it must be one
which is specifically chosen, developed and tuned for the specific source
of entropy you are dealing with.

Given this, what is the point of filtering?  You already have a model.
If you want to be conservative, why not just take 50% more bits than your
model says you needed?

The other problem is the functioning of this filter.  I haven'</span><span class="n">t</span> <span class="n">followed</span>
<span class="n">Jon</span><span class="s1">'s proposals closely, but at one point he was talking about
histogramming the input and throwing out data which he had seen too
often.  Now this is an implicit model as well - it assumes that the data
is supposed to be uniformly distributed on a per-byte (or whatever the
data elements are) basis.

Suppose your random noise from dubious sources includes some timing
values which vary in the range 90-110, roughly normally distributed.  You
have good reason to believe that it actually is a normal distribution,
and that there are 2 or 3 good bits of entropy per sample.  If you didn'</span><span class="n">t</span>
<span class="n">use</span> <span class="n">Jon</span><span class="s1">'s filter you could just collect data, hash it, and figure that
each datum gave you this much entropy.

But now if you throw Jon'</span><span class="n">s</span> <span class="n">filter</span> <span class="k">in</span> <span class="n">there</span><span class="p">,</span> <span class="n">it</span> <span class="n">may</span> <span class="n">start</span> <span class="n">throwing</span> <span class="n">out</span> <span class="n">all</span>
<span class="n">the</span> <span class="n">values</span> <span class="k">in</span> <span class="n">the</span> <span class="k">range</span> <span class="m">90</span><span class="p">-</span><span class="m">110.</span>  <span class="n">Where</span> <span class="n">are</span> <span class="n">the</span> <span class="m">0</span><span class="p">-</span><span class="m">80</span><span class="s1">'s?, it wonders.  Where
are the 120'</span><span class="n">s</span> <span class="k">and</span> <span class="n">up</span><span class="p">?</span>  <span class="n">There</span> <span class="n">are</span> <span class="n">way</span> <span class="n">too</span> <span class="n">many</span> <span class="m">100</span><span class="s1">'s here!  If the filter
isn'</span><span class="n">t</span> <span class="n">smart</span> <span class="n">about</span> <span class="n">the</span> <span class="n">data</span> <span class="n">like</span> <span class="n">your</span> <span class="k">model</span> <span class="n">is</span><span class="p">,</span> <span class="n">it</span> <span class="n">could</span> <span class="k">end</span> <span class="n">up</span> <span class="n">throwing</span>
<span class="n">the</span> <span class="n">whole</span> <span class="n">data</span> <span class="k">set</span> <span class="n">out</span><span class="p">.</span>  <span class="n">Your</span> <span class="n">entropy</span> <span class="k">counter</span> <span class="n">would</span> <span class="n">be</span> <span class="n">spinning</span> <span class="n">its</span>
<span class="n">wheels</span> <span class="n">waiting</span> <span class="n">for</span> <span class="n">more</span> <span class="n">data</span><span class="p">,</span> <span class="k">and</span> <span class="n">you</span><span class="s1">'d think you never got enough.

So I think the lesson is that there is only one way to estimate entropy,
and that is to study your source.  I have to agree with Perry that this
filtering concept is not the way to go.  It is a red herring that lures
you in the direction of automatic entropy estimation, and that is really
not safe.

Hal Finney





</span></code></pre></div></div>

<h2 id="thread">Thread</h2>

<ul>
  <li>
    <p>Return to <a href="/archive/1996/04">April 1996</a></p>
  </li>
  <li>
    <p>1996-04-19 (Fri, 19 Apr 1996 12:11:33 +0800) - Re: why compression doesn’t perfectly even out entropy - <em>Hal &lt;hfinney@shell.portal.com&gt;</em></p>
    <ul>
      <li>1996-04-19 (Fri, 19 Apr 1996 15:31:18 +0800) - <a href="/archive/1996/04/1aba963cf368d41b23524588b0da95c109ca6d855db2ea032a6df832fa122bf9">Re: why compression doesn’t perfectly even out entropy</a> - <em>“Perry E. Metzger” &lt;perry@piermont.com&gt;</em></li>
    </ul>
  </li>
</ul>


        <footer>
          
            - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a>
          
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

