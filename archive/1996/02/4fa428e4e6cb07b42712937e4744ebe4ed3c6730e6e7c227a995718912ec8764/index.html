<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title>
    <meta name="author" content="cryptoanarchy.wiki" />
    <meta name="description" content="4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764" />
    <meta name="keywords" content="4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name">

    

    
      <meta content="4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description">
    

    
      <meta content="http://localhost:4000/archive/1996/02/4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764/" property="og:url">
    

    
      <meta content="2018-06-20T21:43:48+02:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image">
    

    
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@_cryptoanarchy">
    <meta name="twitter:creator" content="@_cryptoanarchy">

    
      <meta name="twitter:title" content="4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764">
    

    
      <meta name="twitter:url" content="http://localhost:4000/archive/1996/02/4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764/">
    

    
      <meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a>
          <h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1>
          
            <div class="profile-about">
              Arise, you have nothing to lose but your barbed wire fences!
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a></li>
              
                <li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a></li>
              
                <li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a></li>
            <li><a href="/">Archive Home</a></li>
          </ul>
          <hr>
          <ul class="sidebar-nav">
            <strong>Similar Resources</strong>
            
              <li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a></li>
            
              <li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a></li>
            
              <li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <h1 id="1996-02-18---pseudo-random-the-code">1996-02-18 - pseudo random: THE CODE</h1>

<h2 id="header-data">Header Data</h2>

<p>From: maruishi@netcom.com<br />
To: packrat@tartarus.uwa.edu.au<br />
Message Hash: 4fa428e4e6cb07b42712937e4744ebe4ed3c6730e6e7c227a995718912ec8764<br />
Message ID: &lt;Pine.3.89.9602181140.A871-0100000@netcom18&gt;<br />
Reply To: &lt;199602181409.WAA01614@ratbox.rattus.uwa.edu.au&gt;<br />
UTC Datetime: 1996-02-18 20:03:03 UTC<br />
Raw Date: Mon, 19 Feb 1996 04:03:03 +0800<br /></p>

<h2 id="raw-message">Raw message</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: maruishi@netcom.com
Date: Mon, 19 Feb 1996 04:03:03 +0800
To: packrat@tartarus.uwa.edu.au
Subject: pseudo random: THE CODE
In-Reply-To: &lt;199602181409.WAA01614@ratbox.rattus.uwa.edu.au&gt;
Message-ID: &lt;Pine.3.89.9602181140.A871-0100000@netcom18&gt;
MIME-Version: 1.0
Content-Type: text/plain




On Sun, 18 Feb 1996, Bruce Murphy wrote:

&gt; In message &lt;199602172002.MAA09152@netcom20.netcom.com&gt;, 
&gt;   maruishi@netcom.com wrote:
&gt; &gt; 
&gt; &gt; I was trying to think of a way to come up with true random numbers...
&gt; &gt; And knowing a bit of UNIX socket TCP/IP programming I made a small little
&gt; &gt; program that generates random numbers by measuring the mili-second timing ies
&gt; &gt;  a TCP packet to bounce back, from another network. 
&gt; &gt;   My program simply send some data to port 7 (echo port) of a network on an i
&gt; &gt; nternal list. Then timing it, randomly picks a different network to send to. 
&gt; 
&gt; Interesting idea. Trends may be externally visible, You would probably
&gt; want to normalize it, and you would find that there was quite a few
&gt; deterministic elements of network load -&gt; delay.
&gt; 
&gt; Oh, did I mention clock granularity?
&gt; 
&gt; In short you really aren't going to get 'random numbers' from such a
&gt; scheme, but that's not to say you couldn't have fun playing with it,
&gt; you might even find some use for the ways of calculating immediate
&gt; network load around a node. Especially with regard to interception of
&gt; packets and allowing for time discrepancies whilst doing so.
&gt; 
&gt; Altogether off topic, but could maybe be developed into an idea with,
&gt; maybe a 30% change of being Perrygrammed. Keep working.
&gt; 
&gt; &lt;invisible to perry&gt;
&gt; Bounce me the code, could be interesting
&gt; &lt;/invisible to perry&gt;
&gt; 
&gt; --
&gt; Packrat (BSc/BE;COSO;Wombat Admin)
&gt; Nihil illegitemi carborvndvm.
&gt; 
Here is the code. Its pretty quick and dirty.

#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
#include &lt;netdb.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;time.h&gt;

#define NET_NUM 1/*change this to the number of networks in
				the list below******************************/
struct timezone tz;
struct sockaddr_in addr;
unsigned int bits;

main(int argc, char **argv)
{
struct timeval tv;
register FILE *fin, *key, *nets;
int sock, c, dt, i, net;
unsigned char *packet;
unsigned char ch;

if(argc != 3)
{
printf("Usage: %s [key.file.path] [number of bits in key]\n", argv[0]);
exit(1);
} 
		if((key = fopen(argv[1], "wb")) == NULL)
		{
			perror("file open");
			exit(1);
		}
net = 1;
packet = (unsigned char *)malloc(16);/*you can of course change this value*/
memset(packet, "X", 16);
bits = atoi(argv[2]);
bits = bits / 8; /*how many bytes?*/
	for(i = 0; i&lt;bits; i++)
	{
		sock = con(getn(net));/*Make a connection and return the 
socket.*/
		if((fin = fdopen(sock, "r")) == NULL)
		{
			perror("fdopen");
			close(sock);
			exit(1);
		}
		(void) gettimeofday(&amp;tv, &amp;tz);
sendto(sock,packet, 16, 0, (struct sockaddr *) &amp;addr,sizeof(struct 
sockaddr));
		write(sock, "\r\n", 2);
		while ((c = getc(fin)) != '\n') ;
		dt = deltaT(&amp;tv);
		close(sock);
		fclose(fin);
		ch = dt % 255;
		fputc(ch, key);
		net = dt % NET_NUM;
	}/*for*/
}

int con(char *where)
{
struct sockaddr_in addr;
struct hostent *host_;
register FILE *fin, *fp;
int sock, c, dt;
char *packet;
unsigned char ch;

(void) bzero((char *)&amp;addr, sizeof(struct sockaddr_in));
	addr.sin_addr.s_addr = inet_addr(where);
	if((int)addr.sin_addr.s_addr == -1)
	{
			host_ = gethostbyname(where);
		if (host_ != NULL)
			bcopy(host_-&gt;h_addr, (char *)&amp;addr.sin_addr, 
host_-&gt;h_length);
		else
			{
			printf("Host not found.\n");
			exit(1);
			}
	}
	addr.sin_family = AF_INET;
	addr.sin_port = htons(7);
		
		sock = socket(AF_INET,SOCK_STREAM,IPPROTO_TCP);
		if (sock &lt; 0) {
			fprintf(stderr,"error: socket() failed\n");
			perror("socket");
			return;
		}
	if(connect(sock, (struct sockaddr*) &amp;addr, sizeof(addr))&lt;0)
	{
		close(sock);
		fprintf(stderr, "socket connection error\n");
		perror("connection");
		exit(1);
	}
	return sock;
}

/**************put your network list down here************/
char *getn(int num)
{
char *nets[] = 
	{
	"127.0.0.1"
	};
return nets[num];
}

/*This part is taken from traceroute.*/
deltaT(tp)
struct timeval *tp;
{
	struct timeval tv;

	(void) gettimeofday(&amp;tv, &amp;tz);
	tvsub(&amp;tv, tp);
	return (tv.tv_sec*1000 + (tv.tv_usec + 500)/1000);
}

tvsub(out, in)
register struct timeval *out, *in;
{
	if ((out-&gt;tv_usec -= in-&gt;tv_usec) &lt; 0)   {
		out-&gt;tv_sec--;
		out-&gt;tv_usec += 1000000;
	}
	out-&gt;tv_sec -= in-&gt;tv_sec;
}





</code></pre></div></div>

<h2 id="thread">Thread</h2>

<ul>
  <li>
    <p>Return to <a href="/archive/1996/02">February 1996</a></p>
  </li>
  <li>
    <p>1996-02-17 (Sun, 18 Feb 1996 04:47:02 +0800) - <a href="/archive/1996/02/dbc79aa77f63b1578d7236d8490c3f4aa29ff927af7d645d8831caba04ea9df9">True random numbers</a> - <em>maruishi@netcom.com</em></p>
    <ul>
      <li>1996-02-18 (Sun, 18 Feb 1996 22:32:36 +0800) - <a href="/archive/1996/02/32c208bd485ac3e9b06e3c98307c0ccd50a7645c93c29b6242573978189da79f">Re: True random numbers</a> - <em>Bruce Murphy &lt;packrat@ratbox.rattus.uwa.edu.au&gt;</em>
        <ul>
          <li>1996-02-18 (Mon, 19 Feb 1996 04:03:03 +0800) - pseudo random: THE CODE - <em>maruishi@netcom.com</em></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


        <footer>
          
            - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a>
          
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

