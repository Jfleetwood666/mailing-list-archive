<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicons/favicon.ico" />
    <link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/img/favicons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title>
    <meta name="author" content="cryptoanarchy.wiki" />
    <meta name="description" content="273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f" />
    <meta name="keywords" content="273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name">

    

    
      <meta content="273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description">
    

    
      <meta content="http://localhost:4000/archive/1994/08/273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f/" property="og:url">
    

    
      <meta content="2018-06-20T21:43:48+02:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image">
    

    
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@_cryptoanarchy">
    <meta name="twitter:creator" content="@_cryptoanarchy">

    
      <meta name="twitter:title" content="273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f">
    

    
      <meta name="twitter:url" content="http://localhost:4000/archive/1994/08/273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f/">
    

    
      <meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a>
          <h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1>
          
            <div class="profile-about">
              Arise, you have nothing to lose but your barbed wire fences!
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a></li>
              
                <li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a></li>
              
                <li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a></li>
            <li><a href="/">Archive Home</a></li>
          </ul>
          <hr>
          <ul class="sidebar-nav">
            <strong>Similar Resources</strong>
            
              <li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a></li>
            
              <li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a></li>
            
              <li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <h1 id="1994-08-19---timestampc">1994-08-19 - timestamp.c</h1>

<h2 id="header-data">Header Data</h2>

<p>From: weidai@eskimo.com (Wei Dai)<br />
To: cypherpunks@toad.com<br />
Message Hash: 273f8188935d05f337f8efb6d5942143df7e75b31c9454c31bfc5a2376bee59f<br />
Message ID: &lt;199408190842.AA06174@eskimo.com&gt;<br />
Reply To: <em>N/A</em><br />
UTC Datetime: 1994-08-19 08:43:08 UTC<br />
Raw Date: Fri, 19 Aug 94 01:43:08 PDT<br /></p>

<h2 id="raw-message">Raw message</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: weidai@eskimo.com (Wei Dai)
Date: Fri, 19 Aug 94 01:43:08 PDT
To: cypherpunks@toad.com
Subject: timestamp.c
Message-ID: &lt;199408190842.AA06174@eskimo.com&gt;
MIME-Version: 1.0
Content-Type: text/plain


To: cypherpunks@toad.com

-----BEGIN PGP SIGNED MESSAGE-----

/* timestamp.c - Automatic PGP Time Stamper v0.1
*  by
*  Wei Dai &lt;weidai@eskimo.com&gt;
*
*       Put the line "|timestamp" in your .forward file, and this
*  program will automaticly scan all your mail for a certain subject heading
*  and if found, will sign the body of that mail with PGP, and send it back.
*  Otherwise, the mail goes to your regular mailbox.
*  This is probably most useful as a "trusted" time stamping service.
*
*  Use for experimental purposes only.  Feel free to modify it, but please
*  send me some e-mail if you do more than change the #defines.
*/

#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;fcntl.h&gt;

#define MAILBOX "/usr/spool/mail/weidai"
#define MAILLOCK "/usr/spool/mail/weidai.lock"
#define PGPPATH "/u/w/weidai/.pgp"
#define LOG "/u/w/weidai/.timestamp.log"

#define COMMAND "Time Stamp This Mail"
#define MAXLINE 1024
#define FROM "From "
#define SUBJECT "Subject: "

void Remove_nl (char *);

main()
{
        char sLine[MAXLINE], sFrom[255], sFile[255], sTmp[255];
        char *p;
        FILE *fOut, *fMail, *fLog;
        int bDoIt, fd;

        fLog = fopen(LOG, "a");

        sprintf(sFile, "/tmp/pts_%d", getpid());
        fOut = fopen(sFile, "w");

        sFrom[0]=0;

        while (fgets(sLine, MAXLINE, stdin) != NULL)
        {
                fputs(sLine, fOut);
                if (strncmp(sLine, FROM, strlen(FROM)) == 0)
                {
                        fputs(sLine, fLog);
                        for (p = sLine + strlen(FROM); *p &amp;&amp; *p != ' '; ++p);
                        *p = '\0';
                        strcpy(sFrom, sLine+strlen(FROM));
                        Remove_nl(sFrom);
                }
                else if (strncmp(sLine, SUBJECT, strlen(SUBJECT)) == 0)
                {
                        fputs(sLine, fLog);
                        bDoIt = (strncasecmp(sLine+strlen(SUBJECT), COMMAND, str
                }
                else if (strlen(sLine) &lt;= 1)
                        break;
        }


        if (sFrom[0]==0)
                bDoIt=0;

        if (bDoIt)
        {
                fclose(fOut);
                fOut = fopen(sFile, "w");

                while (fgets(sLine, MAXLINE, stdin) != NULL)
                        fputs(sLine, fOut);
                fclose(fOut);

                sprisFile);
                system(sTmp);
                fputs(sTmp, fLog);
                fputs("\n", fLog);
                unlink(sFile);

                sprintf(sTmp, "/usr/ucb/mail -s 'Time Stamp Output' '%s' &lt; %s.as
                system(sTmp);
                fputs(sTmp, fLog);
                fputs("\n", fLog);
                sprintf(sTmp, "%s.asc", sFile);
                unlink(sTmp);

                fputs("*** time stamped ***********\n\n", fLog);
        }
        else
        {
                while (fgets(sLine, MAXLINE, stdin) != NULL)
                        fputs(sLine, fOut);
                fclose(fOut);

                while ( (fd=open(MAILLOCK, 0)) != -1)
                {
                        close(fd);
                        sleep(5);
                }
                fd=creat(MAILLOCK, 0600);
                close(fd);

                fOut=fopen(MAILBOX, "a");
                fMail=fopen(sFile, "r");
                while (fgets(sLine, MAXLINE, fMail) != NULL)
                        fputs(sLine, fOut);
                fputs("\n", fOut);
                fclose(fMail);
                fclose(fOut);

                unlink(MAILLOCK);
                unlink(sFile);

                fputs("--- personal mail -----------\n\n", fLog);
        }
        fclose(fLog);
        return(0);
}


void Remove_nl (char *string)
{
        int i=0;

        while(string[i]!='\n' &amp;&amp; string[i]!=0)
                i++;

        string[i]=0;
}

-----BEGIN PGP SIGNATURE-----
Version: 2.3a

iQCVAgUBLlRcjjl0sXKgdnV5AQEv2AQAid9urvFjtaQjPYvpqcwhWLy8CCH2OI+O
9mWNnubDZuReH97upNvFYWbDQkFew2Gjfbsj7RwrYSe85gQm+RV0F+/ud64lTCe1
eoPuFrBy2kXugbtJVtp+HB2BGSNc2GtgxIfc61Z3x3E6F4eDagZxtAn2m3ht9Vib
n41IQtRk1uA=
=ojFS
-----END PGP SIGNATURE-----


PGP Public Key available

                   





</code></pre></div></div>

<h2 id="thread">Thread</h2>

<ul>
  <li>
    <p>Return to <a href="/archive/1994/08">August 1994</a></p>
  </li>
  <li>
    <p>1994-08-19 (Fri, 19 Aug 94 01:43:08 PDT) - timestamp.c - <em>weidai@eskimo.com (Wei Dai)</em></p>
  </li>
</ul>


        <footer>
          
            - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a>
          
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

