<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="/static/img/favicons/favicon.ico" /><link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/static/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title><meta name="author" content="cryptoanarchy.wiki" /><meta name="description" content="82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4" /><meta name="keywords" content="82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " /><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"><meta content="" property="fb:app_id"><meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name"><meta content="82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4" property="og:title"><meta content="article" property="og:type"><meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description"><meta content="http://localhost:4000/archive/1994/02/82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4/" property="og:url"><meta content="2018-06-23T00:09:03+02:00" property="article:published_time"><meta content="http://localhost:4000/about/" property="article:author"><meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@_cryptoanarchy"><meta name="twitter:creator" content="@_cryptoanarchy"><meta name="twitter:title" content="82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4"><meta name="twitter:url" content="http://localhost:4000/archive/1994/02/82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4/"><meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><link rel="stylesheet" href="/static/css/syntax.css"><link href="/static/css/bootstrap.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/static/css/super-search.css"><link rel="stylesheet" href="/static/css/thickbox.css"><link rel="stylesheet" href="/static/css/projects.css"><link rel="stylesheet" href="/static/css/main.css"><body><div class="container"><div class="col-sm-3"><div class="fixed-condition"> <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a><h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1><div class="profile-about"> Arise, you have nothing to lose but your barbed wire fences!</div><div class="social"><ul><li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a><li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a><li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></ul></div><hr /><ul class="sidebar-nav"> <strong>Navigation</strong><li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a><li><a href="/">Archive Home</a></ul><hr><ul class="sidebar-nav"> <strong>Similar Resources</strong><li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a><li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a><li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></ul></div></div><div class="col-sm-8 col-offset-1 main-layout"><h1 id="1994-02-17---sendmail-a-tutorial-on-how-to-add--to-your-addressing">1994-02-17 - SENDMAIL: a tutorial on how to add + to your addressing</h1><h2 id="header-data">Header Data</h2><p>From: hughes@ah.com (Eric Hughes)<br /> To: cypherpunks@toad.com<br /> Message Hash: 82295fcc996e18449f91768100d99e063c622a10b10b1d8fb5a60d7b0be2bbd4<br /> Message ID: &lt;9402172154.AA03752@ah.com&gt;<br /> Reply To: <em>N/A</em><br /> UTC Datetime: 1994-02-17 22:00:52 UTC<br /> Raw Date: Thu, 17 Feb 94 14:00:52 PST<br /><h2 id="raw-message">Raw message</h2><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: hughes@ah.com (Eric Hughes)
Date: Thu, 17 Feb 94 14:00:52 PST
To: cypherpunks@toad.com
Subject: SENDMAIL: a tutorial on how to add + to your addressing
Message-ID: &lt;9402172154.AA03752@ah.com&gt;
MIME-Version: 1.0
Content-Type: text/plain


Here's a little tutorial I just wrote on how to get + syntax in your
email addresses.  It's a more reliable way of inserting aliases into
a remailer than using the comment capability of the address format.

This way mail to, say, hh+joebob@soda.berkeley.edu could get delivered
to whoever was behind the joebob name, by whatever arrangements have
been made.

The document is written in such a way that you can send this to your
sysadmin intact and ask them to install it for you.

Eric
-----------------------------------------------------------------------------


How to add + to your email syntax
---------------------------------

Ever wanted one of those cool &lt;user+@domain&gt; addresses?  So you can
use &lt;user+loud_mailing_list@domain&gt; and get a filter to easily move
the list out from your regular mail?  Now you can.

This tutorial works if you're running a fairly standard version of
sendmail.  It requires some hacking to sendmail.cf, so you need the
permission to do that; that's usually root.  The modifications are
fairly straightforward.

I.  Add + to the list of operator symbols.

The sendmail 'o' macro determines how to break up strings in
sendmail.cf rules into tokens.  In order to be able to recognize +
specially, you'll have to add to the operator symbols to make it
separately recognizable.

So, first do a 

	% grep -n ^Do sendmail.cf
	116:Do.:%@!^=/[]

Now, go in and edit line 116 and add a + sign at the end:

	Do.:%@!^=/[]+

That's all.  Now sendmail will not include + inside of its tokens.


II.  Duplicate local delivery rules to accept + syntax.

Sendmail is a delivery multiplexer.  You want to change the syntax for
local deilvery, so all you need to change is the local mail
specifications.  First, make sure your local mailer is called 'local'.
You can search for the mailer definition as follows:

	% grep ^Mlocal sendmail.cf
	Mlocal,	P=/usr/libexec/mail.local, F=lsDFMmn, [...]

I've elided the tail end of the line, because all you really need to
ascertain is that the local mailer has the right name.

Now you want to search for all the delivery rules that deliver mail to
the local mailer:

	% grep -n '#local' sendmail.cf
	563:R$-&lt;@$w&gt;		$#local$:$1
	585:R$-&lt;@$D&gt;		$#local$:$1			user@ah.com
	614:R$+			$#local$:$1			everything else

I have three rules for local delivery.  (The second one is custom, and
allows for delivery to a domain address for which no IP address
exists.)  All you do now is to add a rule for '+' delivery for each
kind of existing local delivery.  After I changed mine, it said:

	% grep -n '#local' sendmail.cf
	563:R$-&lt;@$w&gt;		$#local$:$1
	564:R$-+$*&lt;@$w&gt;		$#local$:$1
	586:R$-&lt;@$D&gt;		$#local$:$1			user@ah.com
	587:R$-+$*&lt;@$D&gt;		$#local$:$1			user@ah.com
	616:R$-+$*		$#local$:$1			everything else
	617:R$+			$#local$:$1			everything else

Rules that matched "$-", a single token, I changed to match "$-+$*", a
single token followed by "+" followed by zero or more tokens.

Rules that matched "$+", one or more tokens, I changed to match
"$-+$*", same as above.  I added the changed rule _before_ the
original rule because otherwise the $+ would swallow up everything.

The $1 in the second column refers to the first macro to match in the
pattern in column one.  That's the username the mail gets to delivered
to.  If you have more complicated usernames, you're likely already a
seasoned sendmail trooper.


III.  Install and Test

You should probably increment the version number when you make the
change.  It's in the 'Z' macro, do

	% grep -n ^DZ sendmail.cf
	104:DZ2.06

Freeze the sendmail configuration with

	sendmail -bz

otherwise your changes won't take effect.  Now send yourself some test
mail and make sure it works.


Eric Hughes
hughes@ah.com
17 February 1994





</code></pre></div></div><h2 id="thread">Thread</h2><ul><li><p>Return to <a href="/archive/1994/02">February 1994</a><li><p>1994-02-17 (Thu, 17 Feb 94 14:00:52 PST) - SENDMAIL: a tutorial on how to add + to your addressing - <em>hughes@ah.com (Eric Hughes)</em></ul><footer> - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a></footer></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> <script src="/static/js/bootstrap.min.js"></script> <script src="/static/js/super-search.js"></script> <script src="/static/js/thickbox-compressed.js"></script> <script src="/static/js/projects.js"></script>
