<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="/static/img/favicons/favicon.ico" /><link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/static/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title><meta name="author" content="cryptoanarchy.wiki" /><meta name="description" content="Ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779" /><meta name="keywords" content="Ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " /><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"><meta content="" property="fb:app_id"><meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name"><meta content="Ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779" property="og:title"><meta content="article" property="og:type"><meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description"><meta content="http://localhost:4000/archive/1993/11/ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779/" property="og:url"><meta content="2018-06-27T00:58:45+02:00" property="article:published_time"><meta content="http://localhost:4000/about/" property="article:author"><meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@_cryptoanarchy"><meta name="twitter:creator" content="@_cryptoanarchy"><meta name="twitter:title" content="Ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779"><meta name="twitter:url" content="http://localhost:4000/archive/1993/11/ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779/"><meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><link rel="stylesheet" href="/static/css/syntax.css"><link href="/static/css/bootstrap.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/static/css/super-search.css"><link rel="stylesheet" href="/static/css/thickbox.css"><link rel="stylesheet" href="/static/css/projects.css"><link rel="stylesheet" href="/static/css/main.css"><body><div class="container"><div class="col-sm-3"><div class="fixed-condition"> <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a><h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1><div class="profile-about"> Arise, you have nothing to lose but your barbed wire fences!</div><div class="social"><ul><li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a><li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a><li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></ul></div><hr /><ul class="sidebar-nav"> <strong>Navigation</strong><li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a><li><a href="/">Archive Home</a><li><a href="/archive/">Posts by Year</a><li><a href="/authors/by-posts/">Authors by Post Number</a><li><a href="/authors/notable/">Notable Authors</a></ul><hr><ul class="sidebar-nav"> <strong>Similar Resources</strong><li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a><li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a><li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></ul></div></div><div class="col-sm-8 col-offset-1 main-layout"><h1 id="1993-11-16---procmail-pgp">1993-11-16 - procmail-pgp</h1><h2 id="header-data">Header Data</h2><p>From: J. Michael Diehl &lt;mdiehl<span>@</span>triton.unm.edu&gt;<br /> To: cypherpunks@toad.com<br /> Message Hash: ae568a875f83b4e1c0d7d2334986321f00f8691b901c60dd0dfe97e1c6986779<br /> Message ID: &lt;9311160713.AA10159@triton.unm.edu&gt;<br /> Reply To: <em>N/A</em><br /> UTC Datetime: 1993-11-16 07:14:05 UTC<br /> Raw Date: Mon, 15 Nov 93 23:14:05 PST<br /><h2 id="raw-message">Raw message</h2><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: J. Michael Diehl &lt;mdiehl@triton.unm.edu&gt;
Date: Mon, 15 Nov 93 23:14:05 PST
To: cypherpunks@toad.com
Subject: procmail-pgp
Message-ID: &lt;9311160713.AA10159@triton.unm.edu&gt;
MIME-Version: 1.0
Content-Type: text/plain


     Well, I had a few set-backs, but the alpha version of my procmail pgp
preprocessor is ready to test.  I've been using it for about a week now, and 
it seems to work well.  I hope you enjoy it.  Comments are welcome.

     The procmail recipes in this file will make using many of
pgp's Email-related features automatic.  What they will do for you
is:

1)   Automatically verify pgp signed messages.
2)   Automatically determine who a pgp encrypted message is
     intended for.
3)   Automatically add mailed pgp keys to your pubring.pgp file.
4)   Allow people who do not use pgp to request that their messages
     to you get stored in an encrypted form.  This will prevent
     nosy systems administrators from reading your mail.
5)   Allow people to also request that the entire message,
     including the header, be encrypted.  This will prevent anyone
     from even determining where you get your mail from, mail logs
     not withstanding.
6)   Modify a message's subject to inform you that it contains a
     key (key), a signed message (sig), and/or an encrypted message
     (prv).

     There are a few things I'd like to add to this file.  I'd like
to search messages for references to "pgp", "finger" and have
procmail finger the sender's account and send the output to pgp -
kaf.

     These recipes are writen in a modular form.  The recipes which
make up this system can be extracted from the rest of your
.procmailrc file with the command:

awk '/#.pgp-start/,/#.pgp-end/ {print $0} {continue}' &gt; out.pro

     To get the system working, you have to have procmail
installed, and in your path.  You will need to edit the included
.procmailrc file as described below.  Then you have to put a (the?)
.procmailrc file in your home directory.  Next, you have to modify
your .forward file to look like:  (change it as appropriate)

mdiehl@triton.unm.edu
"|IFS=' ';if test .`/bin/hostname` = .triton.unm.edu; then exec /nfs/dorado/u11/mdiehl/bin/procmail -p ; else exit 0; fi"

     Finally, you will have to configure the .procmailrc file.  You
will have to change these variables to something appropriate to your 
environment.

PATH= 
ME=
HOME=	
MAILDIR =	/usr/spool/mail	
SENDMAIL=	/usr/lib/sendmail
TMP=		/usr/tmp

The previous ones are self-explanitory.

SECSTR=		=-=-=-=-=-=-PGP-INFO-=-=-=-=-=-=-=

Set this one to something pleasing to the eye, but that only you know.  This 
will prevent others from spoofing the procmail-pgp validation info.  Trust me.

LOGFILE =	$HOME/PROCMAIL_LOG

The logfile is invaluable for debugging.....

AFROM=		"root@can.see.this (Big Brother isn't watching me!)"
ASUB=		"How's the wife?"

When a person requests that all of his message is to be encoded, procmail-pgp
uses AFROM as the new From: header, and ASUB as the new Subject: header.  Be
creative.


BTW, if you want to request that either all of a message, or just the body is
to be encrypted, you include either:

X-request-pgp-encoded: all
X-request-pgp-encoded: body

at the beginning of a line in the body of the message, or in the header.  I 
hope you have lots of fun with this. ;^)

----------cut----here------ ;^)

# pgp-start

PATH=/usr/local/bin:/usr/ucb:/bin:/usr/bin:/nfs/dorado/e1/ultmips4.2/gnu/bin:/usr/new:$HOME/bin:/nfs/dorado/unsup/bin/:.
ME=		mdiehl
HOME=		/nfs/dorado/u11/mdiehl
MAILDIR =	/usr/spool/mail	
SECSTR=		=-=-=-=-=-=-PGP-INFO-=-=-=-=-=-=-=
LOGFILE =	$HOME/PROCMAIL_LOG
TMP=		/usr/tmp
AFROM=		"root@can.see.this (Big Brother isn't watching me!)"
ASUB=		"How's the wife?"
SENDMAIL=	/usr/lib/sendmail

DEFAULT =	$MAILDIR/$ME
TMPFILE=	$TMP/procmail.$$
VALIDATE=	"echo $SECSTR"
PGPMSGS=	"(^Good)|(^Valid)|(^.WARNING)|(^.ERROR)|(^.Key)|(^.Error)|(^No)|(^File)|(^.You)|(^Bad)|(^pub)|(^sig)"
PGPPATH=	$HOME
DELIVER=	"procmail -p $HOME/.procmailrc"
LOCKFILE=	$MAILDIR/$ME.lock	# This will remove the global lockfile
					# $HOME/.lockmail and the new lockfile
					# will be $MAILDIR/whatever

#
#	Lets take care of some business first.
#
VERBOSE=NO
DO= `rm -f $HOME/pubring.bak`
FROM= `formail -rx"To:"`
SUBJECT= `formail -x"Subject:"`
LOG=	"======$FROM
"
# pgp-end

#
#	This retains a list of everyone who sends me mail
#
:0whc
| echo $FROM &gt;&gt; $HOME/HEADERS ; sort -u &lt; $HOME/HEADERS &gt; $TMPFILE ; mv -f $TMPFILE $HOME/HEADERS
# 
#
#	Send and delete PROCMAIL_LOG
#
:0
* ^Subject:.+PROCMAIL_LOG
| cat &gt; /dev/null ; elm -sLog me &lt; $HOME/PROCMAIL_LOG ; rm -f $HOME/PROCMAIL_LOG

#
#	This one sends an automatic reply to special people.
#	I think I broke this one.
:0c
* ^Subject:.+1234567890
* !^FROM_DAEMON
* !^From.+$ME
* !^X-Loop:
| (formail -r -A"X-Loop:$ME" ; cat $HOME/AUTO-REPLY) | $SENDMAIL -t 
 
#
#	Forward to my novell account
#
:0c
* ^Subject:.+Urgent
! miked@anderson.unm.edu 
 
 
#
# From peb@procase.com Tue Oct 26 18:03:16 1993
#
#:0B
#* subscribe|unsubscribe|sign.on|sign.off|signon|signoff|remove|add|SUBSCRIBE|UNSUBSCRIBE
#/$HOME/SUBSCRIBTIONS

#
#	DeDigest digests.
#
:0
* ^From:.+linux-activists@
| formail +1 -A"X-from:Linux-Activists" -ds $DELIVER
:0
* ^Subject:.+Homebrew.Digest
| formail +1 -A"X-From:Homebrew-Digest" -ds $DELIVER

# pgp-start

VERBOSE=YES

#
#	Validate pgp signed messages.
#
:0chHBw
* ^-+BEGIN.PGP.SIG
* !^X-Loop-signed:
| cat &gt; $TMPFILE ; $VALIDATE &gt;&gt; $TMPFILE  
:0wbAc
| pgp -f +batchmode |&amp; egrep $PGPMSGS &gt;&gt;&amp; $TMPFILE ; $VALIDATE &gt;&gt; $TMPFILE
:0Ab
| cat &gt;&gt; $TMPFILE ; formail &lt; $TMPFILE -i"X-Loop-signed:$ME" -i"Subject: (sig) $SUBJECT" | $DELIVER ; rm -f $TMPFILE ;

#
#	Adds included pgp public keys to keyring.
#
:0chHBw
* ^-+BEGIN.PGP.PUBLIC
* !^X-Loop-key:
$TMPFILE 
:0Awc
| cat &gt; /dev/null ; $VALIDATE &gt;&gt; $TMPFILE 
:0wbAc
| pgp -kaf +batchmode |&amp; egrep $PGPMSGS &gt;&gt;&amp; $TMPFILE ; $VALIDATE &gt;&gt; $TMPFILE
:0bA
| cat &gt;&gt; $TMPFILE ; formail &lt; $TMPFILE -i"X-Loop-key:$ME" -i"Subject: (key) $SUBJECT" | $DELIVER ; rm -f $TMPFILE ;
#
#	Validate pgp messages.
#
:0chHBw
* ^-+BEGIN.PGP.MESSAGE
* !^X-Loop-message:
$TMPFILE
:0Awc
| cat &gt; /dev/null ; $VALIDATE &gt;&gt; $TMPFILE
:0wbAc
| pgp -f +batchmode |&amp; egrep $PGPMSGS &gt;&gt;&amp; $TMPFILE ; $VALIDATE &gt;&gt; $TMPFILE
:0bA
| cat &gt;&gt; $TMPFILE ; formail &lt; $TMPFILE -i"X-Loop-message:$ME" -i"Subject: (prv) $SUBJECT" | $DELIVER ; rm -f $TMPFILE ;

#
# These two are used to encrypt email that has a specific header in it.
#
:0hcHBw
* ^X-request-pgp-encoded:.+body
* !X-Loop
* !X-Loop:.+$ME
| cat &gt; $TMPFILE
:0Ab
| pgp -fet $ME &gt;&gt; $TMPFILE ; formail &lt; $TMPFILE -A"X-Loop:$ME" | $DELIVER ; rm -f $TMPFILE ;
 
:0bhHB
* ^X-request-pgp-encoded:.+all
| pgp -fet $ME | formail -A"From: $AFROM" -A"Subject: $ASUB" | $DELIVER ; rm -f $TMPFILE ;

# pgp-end

#:0Hbcw
#* ^Subject:.+(hacker)|(Hacker)|(HACKER)$
#* ? grep $FROM &lt; $HOME/members
#* !X-Loop:.+$ME
#| egrep "^((do)|(DO)|(Do)|(password))" &gt; $TMPFILE 
#:0Ac
#| set PASS1=`grep password &lt; $TMPFILE | awk '{ print $2}'` ;\
#	set PASS2=`grep $FROM &lt; $HOME/members | awk '{ print $2}'`
#LOG= "$PASS1 $PASS2"
#:0A
#? test "$PASS1 -eq $PASS2"
#| elm -s$PASS1 me  




</code></pre></div></div><h2 id="thread">Thread</h2><ul><li><p>Return to <a href="/archive/1993/11">November 1993</a><li>Return to “<a href="/authors/j_michael_diehl_mdiehl_at_triton_unm_edu_">J. Michael Diehl &lt;mdiehl<span>@</span>triton.unm.edu&gt;</a>”<li><p>Return to “<a href="/authors/steve_willey_willey_at_seattleu_edu_">steve willey &lt;willey<span>@</span>seattleu.edu&gt;</a>”<li>1993-11-16 (Mon, 15 Nov 93 23:14:05 PST) - procmail-pgp - <em>J. Michael Diehl &lt;mdiehl@triton.unm.edu&gt;</em><ul><li>1993-11-16 (Mon, 15 Nov 93 23:50:44 PST) - <a href="/archive/1993/11/e451829150943d47e5c2dc4f1bfaf5be17e55df52b263beb244445a80892649b">Re: procmail-pgp</a> - <em>steve willey &lt;willey@seattleu.edu&gt;</em></ul></ul><footer> - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a></footer></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> <script src="/static/js/bootstrap.min.js"></script> <script src="/static/js/super-search.js"></script> <script src="/static/js/thickbox-compressed.js"></script> <script src="/static/js/projects.js"></script>
