<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="shortcut icon" href="/static/img/favicons/favicon.ico" /><link rel="apple-touch-icon" sizes="57x57" href="/static/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/static/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/static/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/static/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicons/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><title>cryptoanarchy.wiki - Cypherpunks Mailing List Archive</title><meta name="author" content="cryptoanarchy.wiki" /><meta name="description" content="846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58" /><meta name="keywords" content="846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58, cryptoanarchy.wiki - Cypherpunks Mailing List Archive, " /><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml"><meta content="" property="fb:app_id"><meta content="cryptoanarchy.wiki - Cypherpunks Mailing List Archive" property="og:site_name"><meta content="846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58" property="og:title"><meta content="article" property="og:type"><meta content="Arise, you have nothing to lose but your barbed wire fences!" property="og:description"><meta content="http://localhost:4000/archive/1993/09/846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58/" property="og:url"><meta content="2018-06-27T00:58:45+02:00" property="article:published_time"><meta content="http://localhost:4000/about/" property="article:author"><meta content="http://localhost:4000/static/img/avatar.jpg" property="og:image"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@_cryptoanarchy"><meta name="twitter:creator" content="@_cryptoanarchy"><meta name="twitter:title" content="846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58"><meta name="twitter:url" content="http://localhost:4000/archive/1993/09/846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58/"><meta name="twitter:description" content="Arise, you have nothing to lose but your barbed wire fences!"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><link rel="stylesheet" href="/static/css/syntax.css"><link href="/static/css/bootstrap.min.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/static/css/super-search.css"><link rel="stylesheet" href="/static/css/thickbox.css"><link rel="stylesheet" href="/static/css/projects.css"><link rel="stylesheet" href="/static/css/main.css"><body><div class="container"><div class="col-sm-3"><div class="fixed-condition"> <a href="/"><img class="profile-avatar" src="/static/img/avatar.jpg" height="75px" width="75px" /></a><h1 class="author-name"><a href="/">cryptoanarchy.wiki</a></h1><div class="profile-about"> Arise, you have nothing to lose but your barbed wire fences!</div><div class="social"><ul><li><a href="https://twitter.com/_cryptoanarchy" target="_blank"><i class="fa fa-twitter"></i></a><li><a href="https://www.facebook.com/cryptoanarchy.wiki" target="_blank"><i class="fa fa-facebook"></i></a><li><a href="https://github.com/cryptoanarchywiki" target="_blank"><i class="fa fa-github"></i></a></ul></div><hr /><ul class="sidebar-nav"> <strong>Navigation</strong><li><a href="https://cryptoanarchy.wiki">Return to cryptoanarchy.wiki</a><li><a href="/">Archive Home</a><li><a href="/archive/">Posts by Year</a><li><a href="/authors/by-posts/">Authors by Post Number</a><li><a href="/authors/notable/">Notable Authors</a></ul><hr><ul class="sidebar-nav"> <strong>Similar Resources</strong><li><a class="about" href="https://lopp.net/bitcoin.html" target="_blank">Lopp's Bitcoin Resources</a><li><a class="about" href="https://nakamotoinstitute.org/" target="_blank">Satoshi Nakamoto Institute</a><li><a class="about" href="https://www.activism.net/cypherpunk/" target="_blank">Activism.net: Cypherpunks</a></ul></div></div><div class="col-sm-8 col-offset-1 main-layout"><h1 id="1993-09-09---blank-lines-v-the-remailer">1993-09-09 - blank lines v. the remailer</h1><h2 id="header-data">Header Data</h2><p>From: collins<span>@</span>newton.apple.com (Scott Collins)<br /> To: klbarrus@owlnet.rice.edu<br /> Message Hash: 846b17ad937f6ab2d8a37458614d85e1c8412f4069dcf38c8d42a07fc84ded58<br /> Message ID: &lt;9309092017.AA13959@newton.apple.com&gt;<br /> Reply To: <em>N/A</em><br /> UTC Datetime: 1993-09-09 20:52:26 UTC<br /> Raw Date: Thu, 9 Sep 93 13:52:26 PDT<br /><h2 id="raw-message">Raw message</h2><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>From: collins@newton.apple.com (Scott Collins)
Date: Thu, 9 Sep 93 13:52:26 PDT
To: klbarrus@owlnet.rice.edu
Subject: blank lines v. the remailer
Message-ID: &lt;9309092017.AA13959@newton.apple.com&gt;
MIME-Version: 1.0
Content-Type: text/plain


  &gt;        Upon repeated tests of my remailers, I noticed that if there's
  &gt;more than one blank line between the header and the header-pasting, then
  &gt;the pasting doesn't take place. Does this happen with other people's
  &gt;remailers? How is your script different from mine? How can this be fixed?

What follows is some of the text of the recurse.pl script, a component of
the remailer system.  I imagine that there are different versions of this
script floating around, but this is the version I got from
soda.berkeley.com when I set up my remailer.  I have commented it (and
noted my comments with 'SC:') to explain the relevent behavior, and deleted
non-relevent sections:

----------cut here----------

  # SC:read the header, looking for relevent lines

while (&lt;&gt;) {                # SC:get the next line (from where ever) into $_
        s/[ \t\r]*$// ;     # SC:remove trailing white space from $_
        last if /^$/ ;      # SC:get out if this line ($_) is otherwise blank
       ...code deleted here...
}


# SC:at this point $_ contains the blank line that followed the header
#  unless there was no blank line or message following the header (bad message)


  # We have just read the last line in the header.
  # Now we check to see if there is a pasting operator.

if ( ( $_ = &lt;&gt; ) &amp;&amp; /^::[ \t\r]*$/ ) {

  # SC:get the next line (from where ever) into $_ ('if' can't use 'while'
  #  magic form), and if that next line is the pasting token then...

           # SC:append all the folling lines (up to, but not including,
           #  the next blank one) to the header
        while (&lt;&gt;) {
           ...code deleted here...
        }
} 

...code deleted here...
----------cut here----------

You can see (from the condition of the 'if') that this code only finds the
pasting token if it is separated from the header by exactly one blank line.

This is easy enough to fix, if it is not the desired behavior, by inserting

while (&lt;&gt;) {
  last unless /^[ \t\r]*$/ ;
}

before the 'if' and removing the '($_=&lt;&gt;) &amp;&amp;' from the if condition.

Hope this helps,


Scott Collins         | "Few people realize what tremendous power there
                      |  is in one of these things."     -- Willy Wonka
......................|................................................
BUSINESS.   voice:408.862.0540  fax:974.6094   collins@newton.apple.com
Apple Computer, Inc.   1 Infinite Loop, MS 301-2C   Cupertino, CA 95014
.......................................................................
PERSONAL.   voice/fax:408.257.1746    1024:669687   catalyst@netcom.com






</code></pre></div></div><h2 id="thread">Thread</h2><ul><li><p>Return to <a href="/archive/1993/09">September 1993</a><li><p>Return to “<a href="/author/collins_at_newton_apple_com_scott_collins_">collins<span>@</span>newton.apple.com (Scott Collins)</a>”<li><p>1993-09-09 (Thu, 9 Sep 93 13:52:26 PDT) - blank lines v. the remailer - <em>collins@newton.apple.com (Scott Collins)</em></ul><footer> - <a href="https://github.com/cryptoanarchywiki/mailing-list-archive">https://github.com/cryptoanarchywiki/mailing-list-archive</a></footer></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script> <script src="/static/js/bootstrap.min.js"></script> <script src="/static/js/super-search.js"></script> <script src="/static/js/thickbox-compressed.js"></script> <script src="/static/js/projects.js"></script>
